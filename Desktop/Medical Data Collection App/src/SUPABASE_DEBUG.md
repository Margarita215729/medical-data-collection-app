# Диагностика подключения Supabase

## Что было добавлено

1. **Утилиты диагностики** (`/utils/test-supabase.tsx`):
   - Тестирование подключения к Supabase Auth
   - Проверка серверных функций
   - Тестирование доступности аккаунтов

2. **Компонент статуса подключения** (`/components/ConnectionStatus.tsx`):
   - Отображение статуса инициализации
   - Автоматическая панель диагностики при ошибках

3. **Панель диагностики** (`/components/DebugPanel.tsx`):
   - Детальная информация о конфигурации
   - Ручной запуск тестов
   - Отображение результатов

## Как работает диагностика

1. При запуске приложения автоматически выполняется:
   - Проверка подключения к Supabase
   - Тест серверных функций
   - Проверка доступности тестовых аккаунтов

2. При ошибках показывается панель диагностики с возможностью:
   - Просмотреть конфигурацию Supabase
   - Запустить диагностику вручную
   - Увидеть детальные результаты тестов

## Типичные проблемы и решения

### Ошибка серверного подключения
- **Причина**: Серверная функция не развернута или неправильно настроена
- **Решение**: Проверить переменные среды SUPABASE_URL и SUPABASE_SERVICE_ROLE_KEY

### Тестовые аккаунты недоступны
- **Причина**: Серверная инициализация не завершена
- **Решение**: Подождать несколько секунд и повторить тест

### CORS ошибки
- **Причина**: Неправильная настройка CORS на сервере
- **Решение**: Проверить настройки CORS в файле `/supabase/functions/server/index.tsx`

## Использование

1. Откройте приложение
2. При проблемах с подключением увидите экран диагностики
3. Нажмите "Запустить диагностику" для детальной проверки
4. Проверьте консоль браузера для подробных логов
5. При успешной диагностике приложение автоматически перейдет к форме входа

## Тестовые аккаунты

- doctor1@medical.com / medical2024! (Невролог)
- doctor2@medical.com / medical2024! (Физиотерапевт) 
- doctor3@medical.com / medical2024! (Логопед)
- doctor4@medical.com / medical2024! (Психолог)